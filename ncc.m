clear all,clc;ticsource = load('source_block.txt');target = load('target_search_window.txt');[source_i,source_j] = size(source);[target_i,target_j] = size(target);s = zeros(source_i,source_j);t = zeros(target_i,target_j);for i = 1:source_i    for j = 1:source_j        s(i,j) = source(i,j);    endendfor i = 1:target_i    for j = 1:target_j        t(i,j) = target(i,j);    endendn = source_i * source_j;sigma_s_t = 0; s_bar = 0; sigma_s = 0; sigma_t = 0; t_bar = 0; sigma_t_t = 0; max = 0;for right = 0:target_i-source_i    for down = 0:target_j-source_j        for i = 1:source_i            for j = 1:source_j                sigma_s_t = sigma_s_t + s(i,j) * t(i+right,j+down);                sigma_s = sigma_s + s(i,j);                sigma_t = sigma_t + t(i+right,j+down);                sigma_t_t = sigma_t_t + t(i+right,j+down) * t(i+right,j+down);            end        end        s_bar = sigma_s/n;         t_bar = sigma_t/n;             num = (sigma_s_t-n*s_bar*t_bar) * (sigma_s_t-n*s_bar*t_bar);        den = sigma_t_t-n * t_bar * t_bar;        NCC = num / den;        sigma_s_t = 0; sigma_s = 0; sigma_t = 0; s_bar = 0; t_bar = 0; sigma_t_t = 0;                if NCC > max            max = NCC;            x = right;            y = down;        end    endendtoc